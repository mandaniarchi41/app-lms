{"ast":null,"code":"import _objectSpread from\"E:/lms-assesment-frontend/my-lms-frontend (2)/my-lms-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import ReactPlayer from'react-player';import{useAuth}from'../context/AuthContext';// Placeholder Video Player Component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VideoPlayer=_ref=>{let{videoUrl,onEnded}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"relative\",style:{paddingBottom:'56.25%',height:0},children:/*#__PURE__*/_jsx(ReactPlayer,{url:videoUrl,controls:true,width:\"100%\",height:\"100%\",onEnded:onEnded// Disable download functionality if possible (react-player doesn't offer a direct prop, relies on browser/source)\n,config:{file:{attributes:{controlsList:'nodownload'}}}})});};const CourseDetails=()=>{var _course$modules$2;const{id}=useParams();const[course,setCourse]=useState(null);const[loading,setLoading]=useState(true);const[currentLessonIndex,setCurrentLessonIndex]=useState(0);const[completedLessons,setCompletedLessons]=useState({});const[isCoursePurchased,setIsCoursePurchased]=useState(false);const{user,isAuthenticated}=useAuth();// Get user and isAuthenticated from auth context\nuseEffect(()=>{// In a real app, this would fetch course details from the server\n// Mock data for demonstration with sample lessons and video URLs\nconst mockCourseData=[{id:1,title:'Web Development Bootcamp',description:'Learn full-stack web development from scratch',instructor:'John Smith',duration:'12 weeks',level:'Beginner',isPaid:false,// This course is free\nprice:'Free',modules:[{id:1,title:'Introduction to HTML',duration:'2 hours',lessons:[{id:101,title:'What is HTML?',duration:'30 mins',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'},// Placeholder URL\n{id:102,title:'HTML Structure',duration:'1 hour',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'}// Placeholder URL\n]},{id:2,title:'CSS Fundamentals',duration:'3 hours',lessons:[{id:201,title:'CSS Selectors',duration:'45 mins',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'},// Placeholder URL\n{id:202,title:'CSS Box Model',duration:'1.5 hours',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'}// Placeholder URL\n]},{id:3,title:'JavaScript Basics',duration:'4 hours',lessons:[{id:301,title:'JS Variables',duration:'1 hour',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'},// Placeholder URL\n{id:302,title:'JS Data Types',duration:'1 hour',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'},// Placeholder URL\n{id:303,title:'JS Functions',duration:'2 hours',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'}// Placeholder URL\n]}],thumbnail:'https://via.placeholder.com/800x400'},{id:2,title:'Data Science Fundamentals',description:'Master data analysis and machine learning',instructor:'Jane Smith',duration:'10 weeks',level:'Intermediate',isPaid:true,// This course is paid\nprice:'₹3,499',modules:[{id:4,title:'Introduction to Data Science',duration:'3 hours',lessons:[{id:401,title:'What is Data Science?',duration:'1 hour',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'},// Placeholder URL\n{id:402,title:'Data Analysis Tools',duration:'2 hours',videoUrl:'https://www.youtube.com/watch?v=dQw4w9WgXcQ'}// Placeholder URL\n]}],thumbnail:'https://via.placeholder.com/800x400'}// Add more mock courses as needed\n];const foundCourse=mockCourseData.find(course=>course.id===parseInt(id));setCourse(foundCourse);// Load completed lessons from localStorage for the specific user and course\nif(user){const storedCompletedLessons=localStorage.getItem(\"completedLessons_\".concat(user.id,\"_\").concat(id));if(storedCompletedLessons){setCompletedLessons(JSON.parse(storedCompletedLessons));}// Check if course is purchased for the user\nconst purchasedCourses=JSON.parse(localStorage.getItem(\"purchasedCourses_\".concat(user.id))||'[]');setIsCoursePurchased(purchasedCourses.includes(parseInt(id)));}setLoading(false);},[id,user]);// Add user as dependency to re-run when user logs in/out\n// Save completed lessons to localStorage whenever it changes (per user and course)\nuseEffect(()=>{if(user&&Object.keys(completedLessons).length>0){localStorage.setItem(\"completedLessons_\".concat(user.id,\"_\").concat(id),JSON.stringify(completedLessons));}},[completedLessons,id,user]);const handleLessonComplete=lessonId=>{if(!user)return;// Prevent completing lessons if not logged in\nsetCompletedLessons(prev=>_objectSpread(_objectSpread({},prev),{},{[lessonId]:true}));};const handleNextLesson=()=>{if(!course||!user)return;// Prevent if course not loaded or not logged in\n// ... (rest of handleNextLesson logic remains the same)\nconst allLessons=(course===null||course===void 0?void 0:course.modules.flatMap(module=>module.lessons))||[];const currentLessonIndexOverall=allLessons.findIndex(lesson=>lesson.id===(currentLesson===null||currentLesson===void 0?void 0:currentLesson.id));const nextLesson=allLessons[currentLessonIndexOverall+1];if(nextLesson){setCurrentLessonIndex(nextLesson.id);}};const isLessonCompleted=lessonId=>completedLessons[lessonId];const isLessonAccessible=(moduleIndex,lessonIndex)=>{var _course$modules$modul;if(!course||!user)return false;// Not accessible if course not loaded or not logged in\nif(!isCoursePurchased&&course.isPaid)return false;// Not accessible if paid and not purchased\nif(moduleIndex===0&&lessonIndex===0)return true;// First lesson is always accessible if purchased/free\n// Check if the previous lesson is completed\nconst previousLesson=(_course$modules$modul=course.modules[moduleIndex])===null||_course$modules$modul===void 0?void 0:_course$modules$modul.lessons[lessonIndex-1];if(previousLesson&&!isLessonCompleted(previousLesson.id)){return false;}// Check if all lessons in previous modules are completed\nfor(let i=0;i<moduleIndex;i++){const previousModule=course.modules[i];if(previousModule&&previousModule.lessons){for(const lesson of previousModule.lessons){if(!isLessonCompleted(lesson.id)){return false;}}}}return true;};// Calculate overall course progress\nconst totalLessons=(course===null||course===void 0?void 0:course.modules.reduce((count,module)=>{var _module$lessons;return count+(((_module$lessons=module.lessons)===null||_module$lessons===void 0?void 0:_module$lessons.length)||0);},0))||0;const completedCount=Object.keys(completedLessons).length;const courseProgress=totalLessons>0?Math.round(completedCount/totalLessons*100):0;const handleBuyCourse=()=>{if(!user){// Redirect to login or show a message prompting login\nalert('Please log in to purchase this course.');return;}// Simulate purchase\nconst purchasedCourses=JSON.parse(localStorage.getItem(\"purchasedCourses_\".concat(user.id))||'[]');if(!purchasedCourses.includes(parseInt(id))){var _course$modules$,_course$modules$$less;purchasedCourses.push(parseInt(id));localStorage.setItem(\"purchasedCourses_\".concat(user.id),JSON.stringify(purchasedCourses));setIsCoursePurchased(true);alert('Course purchased successfully!');// Or use a toast notification\n// Optionally set current lesson to the first lesson after purchase\nsetCurrentLessonIndex(((_course$modules$=course.modules[0])===null||_course$modules$===void 0?void 0:(_course$modules$$less=_course$modules$.lessons[0])===null||_course$modules$$less===void 0?void 0:_course$modules$$less.id)||0);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64 text-primary-text\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-text\"})});}if(!course){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 text-primary-text\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-primary-text\",children:\"Course not found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-700\",children:\"The course you're looking for doesn't exist.\"})]});}const currentLesson=course.modules.flatMap(module=>module.lessons).find(lesson=>lesson.id===currentLessonIndex)||((_course$modules$2=course.modules[0])===null||_course$modules$2===void 0?void 0:_course$modules$2.lessons[0]);// Calculate next lesson for navigation\nconst allLessons=(course===null||course===void 0?void 0:course.modules.flatMap(module=>module.lessons))||[];const currentLessonIndexOverall=allLessons.findIndex(lesson=>lesson.id===(currentLesson===null||currentLesson===void 0?void 0:currentLesson.id));const nextLesson=allLessons[currentLessonIndexOverall+1];return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8 text-primary-text\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full bg-secondary-background flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-primary-text\",children:course.title})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 text-sm font-medium text-secondary-text bg-secondary-background rounded-full\",children:course.level}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:course.duration})]}),course.isPaid?isCoursePurchased?/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 font-semibold\",children:\"Purchased\"}):/*#__PURE__*/_jsxs(\"button\",{onClick:handleBuyCourse,className:\"btn-primary\",children:[\"Buy Course (\",course.price,\")\"]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 font-semibold\",children:\"Free\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-6\",children:course.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-700\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 mr-2 text-gray-700\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"})}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Instructor: \",course.instructor]})]})]})]}),currentLesson&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-border-light\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-primary-text\",children:[\"Lesson: \",currentLesson.title]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(VideoPlayer,{videoUrl:currentLesson.videoUrl,onEnded:()=>handleLessonComplete(currentLesson.id)}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:isLessonCompleted(currentLesson.id)?/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 font-medium\",children:\"Completed!\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleLessonComplete(currentLesson.id),className:\"btn-primary text-sm\",children:\"Mark as Complete\"})}),nextLesson&&isLessonAccessible(course.modules.findIndex(module=>module.lessons.some(lesson=>lesson.id===nextLesson.id)),course.modules.find(module=>module.lessons.some(lesson=>lesson.id===nextLesson.id)).lessons.findIndex(lesson=>lesson.id===nextLesson.id))&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentLessonIndex(nextLesson.id),className:\"btn-secondary text-sm\",children:\"Next Lesson\"})]})]})]}),course&&(isCoursePurchased||!course.isPaid)&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-primary-text mb-4\",children:\"Course Progress\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-secondary-background rounded-full h-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-4 rounded-full transition-all duration-500 ease-in-out\",style:{width:\"\".concat(courseProgress,\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-sm text-gray-700 text-right\",children:[courseProgress,\"% Complete\"]})]}),course&&(isCoursePurchased||!course.isPaid)&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-border-light\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-primary-text\",children:\"Course Modules\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-border-light\",children:course.modules.map((module,moduleIndex)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 bg-secondary-background font-medium text-primary-text\",children:module.title}),/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-border-light\",children:module.lessons.map((lesson,lessonIndex)=>{const accessible=isLessonAccessible(moduleIndex,lessonIndex);const completed=isLessonCompleted(lesson.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 flex items-center justify-between \".concat(!accessible?'opacity-50 cursor-not-allowed':'cursor-pointer'),onClick:()=>accessible&&setCurrentLessonIndex(lesson.id),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium \".concat(accessible?'text-primary-text':'text-gray-500'),children:lesson.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-700\",children:[\"Duration: \",lesson.duration]})]}),completed?/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 font-medium\",children:\"Completed\"}):!accessible&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-yellow-600 font-medium\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock mr-1\"}),\" Locked\"]})]},lesson.id);})})]},module.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-border-light\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-primary-text\",children:\"Requirements\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside space-y-2 text-gray-700\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Basic computer skills\"}),/*#__PURE__*/_jsx(\"li\",{children:\"No prior programming experience required\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Dedication to learn and practice\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Computer with internet connection\"})]})})]})]});};export default CourseDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","ReactPlayer","useAuth","jsx","_jsx","jsxs","_jsxs","VideoPlayer","_ref","videoUrl","onEnded","className","style","paddingBottom","height","children","url","controls","width","config","file","attributes","controlsList","CourseDetails","_course$modules$2","id","course","setCourse","loading","setLoading","currentLessonIndex","setCurrentLessonIndex","completedLessons","setCompletedLessons","isCoursePurchased","setIsCoursePurchased","user","isAuthenticated","mockCourseData","title","description","instructor","duration","level","isPaid","price","modules","lessons","thumbnail","foundCourse","find","parseInt","storedCompletedLessons","localStorage","getItem","concat","JSON","parse","purchasedCourses","includes","Object","keys","length","setItem","stringify","handleLessonComplete","lessonId","prev","_objectSpread","handleNextLesson","allLessons","flatMap","module","currentLessonIndexOverall","findIndex","lesson","currentLesson","nextLesson","isLessonCompleted","isLessonAccessible","moduleIndex","lessonIndex","_course$modules$modul","previousLesson","i","previousModule","totalLessons","reduce","count","_module$lessons","completedCount","courseProgress","Math","round","handleBuyCourse","alert","_course$modules$","_course$modules$$less","push","onClick","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","some","map","accessible","completed"],"sources":["E:/lms-assesment-frontend/my-lms-frontend (2)/my-lms-frontend/src/pages/CourseDetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport ReactPlayer from 'react-player';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\n// Placeholder Video Player Component\r\nconst VideoPlayer = ({ videoUrl, onEnded }) => {\r\n  return (\r\n    <div className=\"relative\" style={{ paddingBottom: '56.25%', height: 0 }}>\r\n      <ReactPlayer\r\n        url={videoUrl}\r\n        controls={true}\r\n        width='100%'\r\n        height='100%'\r\n        onEnded={onEnded}\r\n        // Disable download functionality if possible (react-player doesn't offer a direct prop, relies on browser/source)\r\n        config={{\r\n          file: {\r\n            attributes: {\r\n              controlsList: 'nodownload'\r\n            }\r\n          }\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst CourseDetails = () => {\r\n  const { id } = useParams();\r\n  const [course, setCourse] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentLessonIndex, setCurrentLessonIndex] = useState(0);\r\n  const [completedLessons, setCompletedLessons] = useState({});\r\n  const [isCoursePurchased, setIsCoursePurchased] = useState(false);\r\n\r\n  const { user, isAuthenticated } = useAuth(); // Get user and isAuthenticated from auth context\r\n\r\n  useEffect(() => {\r\n    // In a real app, this would fetch course details from the server\r\n    // Mock data for demonstration with sample lessons and video URLs\r\n    const mockCourseData = [\r\n      {\r\n        id: 1,\r\n        title: 'Web Development Bootcamp',\r\n        description: 'Learn full-stack web development from scratch',\r\n        instructor: 'John Smith',\r\n        duration: '12 weeks',\r\n        level: 'Beginner',\r\n        isPaid: false, // This course is free\r\n        price: 'Free',\r\n        modules: [\r\n          {\r\n            id: 1,\r\n            title: 'Introduction to HTML',\r\n            duration: '2 hours',\r\n            lessons: [\r\n              { id: 101, title: 'What is HTML?', duration: '30 mins', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n              { id: 102, title: 'HTML Structure', duration: '1 hour', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n            ]\r\n          },\r\n          {\r\n            id: 2,\r\n            title: 'CSS Fundamentals',\r\n            duration: '3 hours',\r\n             lessons: [\r\n              { id: 201, title: 'CSS Selectors', duration: '45 mins', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n              { id: 202, title: 'CSS Box Model', duration: '1.5 hours', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n            ]\r\n          },\r\n          {\r\n            id: 3,\r\n            title: 'JavaScript Basics',\r\n            duration: '4 hours',\r\n             lessons: [\r\n              { id: 301, title: 'JS Variables', duration: '1 hour', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n              { id: 302, title: 'JS Data Types', duration: '1 hour', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n              { id: 303, title: 'JS Functions', duration: '2 hours', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n            ]\r\n          },\r\n        ],\r\n        thumbnail: 'https://via.placeholder.com/800x400',\r\n      },\r\n      {\r\n        id: 2,\r\n        title: 'Data Science Fundamentals',\r\n        description: 'Master data analysis and machine learning',\r\n        instructor: 'Jane Smith',\r\n        duration: '10 weeks',\r\n        level: 'Intermediate',\r\n        isPaid: true, // This course is paid\r\n        price: '₹3,499',\r\n        modules: [\r\n          {\r\n            id: 4,\r\n            title: 'Introduction to Data Science',\r\n            duration: '3 hours',\r\n             lessons: [\r\n              { id: 401, title: 'What is Data Science?', duration: '1 hour', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n              { id: 402, title: 'Data Analysis Tools', duration: '2 hours', videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' }, // Placeholder URL\r\n            ]\r\n          },\r\n        ],\r\n        thumbnail: 'https://via.placeholder.com/800x400',\r\n      },\r\n      // Add more mock courses as needed\r\n    ];\r\n\r\n    const foundCourse = mockCourseData.find(course => course.id === parseInt(id));\r\n    setCourse(foundCourse);\r\n\r\n    // Load completed lessons from localStorage for the specific user and course\r\n    if (user) {\r\n        const storedCompletedLessons = localStorage.getItem(`completedLessons_${user.id}_${id}`);\r\n        if (storedCompletedLessons) {\r\n          setCompletedLessons(JSON.parse(storedCompletedLessons));\r\n        }\r\n         // Check if course is purchased for the user\r\n        const purchasedCourses = JSON.parse(localStorage.getItem(`purchasedCourses_${user.id}`) || '[]');\r\n        setIsCoursePurchased(purchasedCourses.includes(parseInt(id)));\r\n    }\r\n\r\n    setLoading(false);\r\n  }, [id, user]); // Add user as dependency to re-run when user logs in/out\r\n\r\n  // Save completed lessons to localStorage whenever it changes (per user and course)\r\n  useEffect(() => {\r\n    if (user && Object.keys(completedLessons).length > 0) {\r\n       localStorage.setItem(`completedLessons_${user.id}_${id}`, JSON.stringify(completedLessons));\r\n    }\r\n  }, [completedLessons, id, user]);\r\n\r\n  const handleLessonComplete = (lessonId) => {\r\n     if (!user) return; // Prevent completing lessons if not logged in\r\n    setCompletedLessons(prev => ({ ...prev, [lessonId]: true }));\r\n  };\r\n\r\n  const handleNextLesson = () => {\r\n    if (!course || !user) return; // Prevent if course not loaded or not logged in\r\n     // ... (rest of handleNextLesson logic remains the same)\r\n     const allLessons = course?.modules.flatMap(module => module.lessons) || [];\r\n      const currentLessonIndexOverall = allLessons.findIndex(lesson => lesson.id === currentLesson?.id);\r\n      const nextLesson = allLessons[currentLessonIndexOverall + 1];\r\n   \r\n      if(nextLesson) {\r\n        setCurrentLessonIndex(nextLesson.id);\r\n      }\r\n  };\r\n\r\n  const isLessonCompleted = (lessonId) => completedLessons[lessonId];\r\n\r\n  const isLessonAccessible = (moduleIndex, lessonIndex) => {\r\n       if (!course || !user) return false; // Not accessible if course not loaded or not logged in\r\n       if (!isCoursePurchased && course.isPaid) return false; // Not accessible if paid and not purchased\r\n\r\n      if (moduleIndex === 0 && lessonIndex === 0) return true; // First lesson is always accessible if purchased/free\r\n   \r\n      // Check if the previous lesson is completed\r\n      const previousLesson = course.modules[moduleIndex]?.lessons[lessonIndex - 1];\r\n      if (previousLesson && !isLessonCompleted(previousLesson.id)) {\r\n        return false;\r\n      }\r\n   \r\n      // Check if all lessons in previous modules are completed\r\n      for (let i = 0; i < moduleIndex; i++) {\r\n        const previousModule = course.modules[i];\r\n        if (previousModule && previousModule.lessons) {\r\n          for (const lesson of previousModule.lessons) {\r\n            if (!isLessonCompleted(lesson.id)) {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n   \r\n      return true;\r\n    };\r\n\r\n    // Calculate overall course progress\r\n    const totalLessons = course?.modules.reduce((count, module) => count + (module.lessons?.length || 0), 0) || 0;\r\n    const completedCount = Object.keys(completedLessons).length;\r\n    const courseProgress = totalLessons > 0 ? Math.round((completedCount / totalLessons) * 100) : 0;\r\n\r\n    const handleBuyCourse = () => {\r\n        if (!user) {\r\n            // Redirect to login or show a message prompting login\r\n            alert('Please log in to purchase this course.');\r\n            return;\r\n        }\r\n        // Simulate purchase\r\n        const purchasedCourses = JSON.parse(localStorage.getItem(`purchasedCourses_${user.id}`) || '[]');\r\n        if (!purchasedCourses.includes(parseInt(id))) {\r\n            purchasedCourses.push(parseInt(id));\r\n            localStorage.setItem(`purchasedCourses_${user.id}`, JSON.stringify(purchasedCourses));\r\n            setIsCoursePurchased(true);\r\n            alert('Course purchased successfully!'); // Or use a toast notification\r\n             // Optionally set current lesson to the first lesson after purchase\r\n             setCurrentLessonIndex(course.modules[0]?.lessons[0]?.id || 0);\r\n        }\r\n    };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64 text-primary-text\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-text\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!course) {\r\n    return (\r\n      <div className=\"text-center py-12 text-primary-text\">\r\n        <h2 className=\"text-2xl font-bold text-primary-text\">Course not found</h2>\r\n        <p className=\"mt-2 text-gray-700\">The course you're looking for doesn't exist.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentLesson = course.modules.flatMap(module => module.lessons).find(lesson => lesson.id === currentLessonIndex) || course.modules[0]?.lessons[0];\r\n\r\n  // Calculate next lesson for navigation\r\n  const allLessons = course?.modules.flatMap(module => module.lessons) || [];\r\n  const currentLessonIndexOverall = allLessons.findIndex(lesson => lesson.id === currentLesson?.id);\r\n  const nextLesson = allLessons[currentLessonIndexOverall + 1];\r\n\r\n  return (\r\n    <div className=\"space-y-8 text-primary-text\">\r\n      {/* Course Header */}\r\n      <div className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n        <div className=\"relative h-64\">\r\n          {/* <img\r\n            src={course.thumbnail}\r\n            alt={course.title}\r\n            className=\"w-full h-full object-cover\"\r\n          /> */}\r\n          {/* Using a placeholder div instead of image */}\r\n          <div className=\"w-full h-full bg-secondary-background flex items-center justify-center\">\r\n             <h1 className=\"text-4xl font-bold text-primary-text\">{course.title}</h1>\r\n          </div>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <span className=\"px-3 py-1 text-sm font-medium text-secondary-text bg-secondary-background rounded-full\">\r\n                {course.level}\r\n              </span>\r\n              <span className=\"text-gray-700\">{course.duration}</span>\r\n            </div>\r\n            {/* Display price or Buy button */}\r\n            {course.isPaid ? (\r\n               isCoursePurchased ? (\r\n                 <span className=\"text-green-600 font-semibold\">Purchased</span>\r\n               ) : (\r\n                 <button onClick={handleBuyCourse} className=\"btn-primary\">Buy Course ({course.price})</button>\r\n               )\r\n            ) : (\r\n               <span className=\"text-green-600 font-semibold\">Free</span>\r\n            )}\r\n          </div>\r\n          <p className=\"text-gray-700 mb-6\">{course.description}</p>\r\n          <div className=\"flex items-center text-gray-700\">\r\n            <svg\r\n              className=\"h-5 w-5 mr-2 text-gray-700\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\r\n              />\r\n            </svg>\r\n            <span>Instructor: {course.instructor}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Video Player Section */}\r\n       {currentLesson && (\r\n        <div className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n           <div className=\"px-6 py-4 border-b border-border-light\">\r\n            <h2 className=\"text-xl font-semibold text-primary-text\">Lesson: {currentLesson.title}</h2>\r\n          </div>\r\n          <div className=\"p-6\">\r\n            <VideoPlayer videoUrl={currentLesson.videoUrl} onEnded={() => handleLessonComplete(currentLesson.id)} />\r\n             {/* Lesson navigation and completion */}\r\n             <div className=\"mt-4 flex justify-between items-center\">\r\n                <div>\r\n                  {isLessonCompleted(currentLesson.id) ? (\r\n                    <span className=\"text-green-600 font-medium\">Completed!</span>\r\n                  ) : (\r\n                     <button\r\n                       onClick={() => handleLessonComplete(currentLesson.id)}\r\n                       className=\"btn-primary text-sm\"\r\n                     >\r\n                       Mark as Complete\r\n                     </button>\r\n                  )}\r\n                </div>\r\n                {nextLesson && isLessonAccessible(\r\n                   course.modules.findIndex(module => module.lessons.some(lesson => lesson.id === nextLesson.id)),\r\n                   course.modules.find(module => module.lessons.some(lesson => lesson.id === nextLesson.id)).lessons.findIndex(lesson => lesson.id === nextLesson.id)\r\n                ) && (\r\n                  <button\r\n                    onClick={() => setCurrentLessonIndex(nextLesson.id)}\r\n                    className=\"btn-secondary text-sm\"\r\n                  >\r\n                    Next Lesson\r\n                  </button>\r\n                )}\r\n             </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n       {/* Course Progress Bar */}\r\n       {course && (isCoursePurchased || !course.isPaid) && (\r\n         <div className=\"bg-white shadow rounded-lg p-6\">\r\n           <h2 className=\"text-xl font-semibold text-primary-text mb-4\">Course Progress</h2>\r\n           <div className=\"w-full bg-secondary-background rounded-full h-4\">\r\n             <div\r\n               className=\"bg-green-500 h-4 rounded-full transition-all duration-500 ease-in-out\"\r\n               style={{ width: `${courseProgress}%` }}\r\n             ></div>\r\n           </div>\r\n           <p className=\"mt-2 text-sm text-gray-700 text-right\">{courseProgress}% Complete</p>\r\n         </div>\r\n       )}\r\n\r\n\r\n      {/* Course Modules (Lesson List) */}\r\n      {course && (isCoursePurchased || !course.isPaid) && (\r\n      <div className=\"bg-white shadow rounded-lg\">\r\n        <div className=\"px-6 py-4 border-b border-border-light\">\r\n          <h2 className=\"text-xl font-semibold text-primary-text\">Course Modules</h2>\r\n        </div>\r\n        <div className=\"divide-y divide-border-light\">\r\n          {course.modules.map((module, moduleIndex) => (\r\n            <div key={module.id}>\r\n              <div className=\"px-6 py-4 bg-secondary-background font-medium text-primary-text\">{module.title}</div>\r\n              <div className=\"divide-y divide-border-light\">\r\n                 {module.lessons.map((lesson, lessonIndex) => {\r\n                   const accessible = isLessonAccessible(moduleIndex, lessonIndex);\r\n                   const completed = isLessonCompleted(lesson.id);\r\n                   return (\r\n                     <div\r\n                       key={lesson.id}\r\n                       className={`p-6 flex items-center justify-between ${!accessible ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}\r\n                       onClick={() => accessible && setCurrentLessonIndex(lesson.id)}\r\n                     >\r\n                       <div>\r\n                         <h3 className={`text-lg font-medium ${accessible ? 'text-primary-text' : 'text-gray-500'}`}>\r\n                           {lesson.title}\r\n                         </h3>\r\n                         <p className=\"mt-1 text-sm text-gray-700\">\r\n                           Duration: {lesson.duration}\r\n                         </p>\r\n                       </div>\r\n                       {\r\n                         completed ? (\r\n                           <span className=\"text-green-600 font-medium\">Completed</span>\r\n                         ) : (\r\n                           !accessible && (\r\n                             <span className=\"text-yellow-600 font-medium\"><i className=\"fas fa-lock mr-1\"></i> Locked</span>\r\n                           )\r\n                         )\r\n                       }\r\n                     </div>\r\n                   );\r\n                 })}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n       )}\r\n\r\n      {/* Course Requirements */}\r\n      <div className=\"bg-white shadow rounded-lg\">\r\n        <div className=\"px-6 py-4 border-b border-border-light\">\r\n          <h2 className=\"text-xl font-semibold text-primary-text\">Requirements</h2>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          <ul className=\"list-disc list-inside space-y-2 text-gray-700\">\r\n            <li>Basic computer skills</li>\r\n            <li>No prior programming experience required</li>\r\n            <li>Dedication to learn and practice</li>\r\n            <li>Computer with internet connection</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseDetails; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}