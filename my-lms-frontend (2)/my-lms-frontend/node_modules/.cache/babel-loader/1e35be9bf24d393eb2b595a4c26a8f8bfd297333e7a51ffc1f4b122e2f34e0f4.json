{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,BarElement,ArcElement,Title,Tooltip,Legend}from'chart.js';import{ASSESSMENT_TYPES,SCORE_RANGES}from'../utils/types';// Register ChartJS components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,BarElement,ArcElement,Title,Tooltip,Legend);const AssessmentVisualizations=_ref=>{let{history,assessments}=_ref;const lineChartRef=useRef(null);const barChartRef=useRef(null);const pieChartRef=useRef(null);const chartsRef=useRef({line:null,bar:null,pie:null});useEffect(()=>{if(!lineChartRef.current||!barChartRef.current||!pieChartRef.current)return;// Destroy existing charts\nObject.values(chartsRef.current).forEach(chart=>{if(chart){chart.destroy();}});// Score Trends Chart\nconst scoreTrendsData={labels:history.sort((a,b)=>new Date(a.completedAt)-new Date(b.completedAt)).map(item=>new Date(item.completedAt).toLocaleDateString()),datasets:[{label:'Score',data:history.sort((a,b)=>new Date(a.completedAt)-new Date(b.completedAt)).map(item=>item.score),borderColor:'rgb(75, 192, 192)',tension:0.1}]};// Section Performance Chart\nconst sectionPerformanceData={labels:Object.keys(ASSESSMENT_TYPES),datasets:[{label:'Average Questions',data:Object.keys(ASSESSMENT_TYPES).map(type=>{const typeAssessments=assessments.filter(a=>a.type===type);return typeAssessments.length>0?typeAssessments.reduce((acc,curr)=>acc+curr.questions.length,0)/typeAssessments.length:0;}),backgroundColor:'rgba(54, 162, 235, 0.5)'}]};// Score Distribution Chart\nconst scoreDistributionData={labels:Object.values(SCORE_RANGES).map(range=>range.label),datasets:[{data:Object.values(SCORE_RANGES).map(range=>history.filter(item=>item.score>=range.min&&item.score<=range.max).length),backgroundColor:Object.values(SCORE_RANGES).map(range=>{switch(range.color){case'green':return'rgba(75, 192, 192, 0.5)';case'blue':return'rgba(54, 162, 235, 0.5)';case'yellow':return'rgba(255, 205, 86, 0.5)';case'red':return'rgba(255, 99, 132, 0.5)';default:return'rgba(201, 203, 207, 0.5)';}})}]};const chartOptions={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},title:{display:true,text:'Assessment Performance'}}};// Create new charts\nchartsRef.current.line=new ChartJS(lineChartRef.current,{type:'line',data:scoreTrendsData,options:chartOptions});chartsRef.current.bar=new ChartJS(barChartRef.current,{type:'bar',data:sectionPerformanceData,options:chartOptions});chartsRef.current.pie=new ChartJS(pieChartRef.current,{type:'pie',data:scoreDistributionData,options:chartOptions});// Cleanup function\nreturn()=>{Object.values(chartsRef.current).forEach(chart=>{if(chart){chart.destroy();}});};},[history,assessments]);return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Score Trends\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:'300px',position:'relative'},children:/*#__PURE__*/_jsx(\"canvas\",{ref:lineChartRef})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Section-wise Performance\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:'300px',position:'relative'},children:/*#__PURE__*/_jsx(\"canvas\",{ref:barChartRef})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Score Distribution\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:'300px',position:'relative'},children:/*#__PURE__*/_jsx(\"canvas\",{ref:pieChartRef})})]})]});};export default AssessmentVisualizations;","map":{"version":3,"names":["React","useEffect","useRef","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","BarElement","ArcElement","Title","Tooltip","Legend","ASSESSMENT_TYPES","SCORE_RANGES","jsx","_jsx","jsxs","_jsxs","register","AssessmentVisualizations","_ref","history","assessments","lineChartRef","barChartRef","pieChartRef","chartsRef","line","bar","pie","current","Object","values","forEach","chart","destroy","scoreTrendsData","labels","sort","a","b","Date","completedAt","map","item","toLocaleDateString","datasets","label","data","score","borderColor","tension","sectionPerformanceData","keys","type","typeAssessments","filter","length","reduce","acc","curr","questions","backgroundColor","scoreDistributionData","range","min","max","color","chartOptions","responsive","maintainAspectRatio","plugins","legend","position","title","display","text","options","className","children","style","height","ref"],"sources":["E:/lms-assesment-frontend/my-lms-frontend (2)/my-lms-frontend/src/assessment/components/AssessmentVisualizations.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport { ASSESSMENT_TYPES, SCORE_RANGES } from '../utils/types';\r\n\r\n// Register ChartJS components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst AssessmentVisualizations = ({ history, assessments }) => {\r\n  const lineChartRef = useRef(null);\r\n  const barChartRef = useRef(null);\r\n  const pieChartRef = useRef(null);\r\n  const chartsRef = useRef({\r\n    line: null,\r\n    bar: null,\r\n    pie: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!lineChartRef.current || !barChartRef.current || !pieChartRef.current) return;\r\n\r\n    // Destroy existing charts\r\n    Object.values(chartsRef.current).forEach(chart => {\r\n      if (chart) {\r\n        chart.destroy();\r\n      }\r\n    });\r\n\r\n    // Score Trends Chart\r\n    const scoreTrendsData = {\r\n      labels: history\r\n        .sort((a, b) => new Date(a.completedAt) - new Date(b.completedAt))\r\n        .map((item) => new Date(item.completedAt).toLocaleDateString()),\r\n      datasets: [\r\n        {\r\n          label: 'Score',\r\n          data: history\r\n            .sort((a, b) => new Date(a.completedAt) - new Date(b.completedAt))\r\n            .map((item) => item.score),\r\n          borderColor: 'rgb(75, 192, 192)',\r\n          tension: 0.1,\r\n        },\r\n      ],\r\n    };\r\n\r\n    // Section Performance Chart\r\n    const sectionPerformanceData = {\r\n      labels: Object.keys(ASSESSMENT_TYPES),\r\n      datasets: [\r\n        {\r\n          label: 'Average Questions',\r\n          data: Object.keys(ASSESSMENT_TYPES).map((type) => {\r\n            const typeAssessments = assessments.filter((a) => a.type === type);\r\n            return typeAssessments.length > 0\r\n              ? typeAssessments.reduce((acc, curr) => acc + curr.questions.length, 0) / typeAssessments.length\r\n              : 0;\r\n          }),\r\n          backgroundColor: 'rgba(54, 162, 235, 0.5)',\r\n        },\r\n      ],\r\n    };\r\n\r\n    // Score Distribution Chart\r\n    const scoreDistributionData = {\r\n      labels: Object.values(SCORE_RANGES).map((range) => range.label),\r\n      datasets: [\r\n        {\r\n          data: Object.values(SCORE_RANGES).map((range) =>\r\n            history.filter((item) => item.score >= range.min && item.score <= range.max).length\r\n          ),\r\n          backgroundColor: Object.values(SCORE_RANGES).map((range) => {\r\n            switch (range.color) {\r\n              case 'green':\r\n                return 'rgba(75, 192, 192, 0.5)';\r\n              case 'blue':\r\n                return 'rgba(54, 162, 235, 0.5)';\r\n              case 'yellow':\r\n                return 'rgba(255, 205, 86, 0.5)';\r\n              case 'red':\r\n                return 'rgba(255, 99, 132, 0.5)';\r\n              default:\r\n                return 'rgba(201, 203, 207, 0.5)';\r\n            }\r\n          }),\r\n        },\r\n      ],\r\n    };\r\n\r\n    const chartOptions = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      plugins: {\r\n        legend: {\r\n          position: 'top',\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Assessment Performance',\r\n        },\r\n      },\r\n    };\r\n\r\n    // Create new charts\r\n    chartsRef.current.line = new ChartJS(lineChartRef.current, {\r\n      type: 'line',\r\n      data: scoreTrendsData,\r\n      options: chartOptions,\r\n    });\r\n\r\n    chartsRef.current.bar = new ChartJS(barChartRef.current, {\r\n      type: 'bar',\r\n      data: sectionPerformanceData,\r\n      options: chartOptions,\r\n    });\r\n\r\n    chartsRef.current.pie = new ChartJS(pieChartRef.current, {\r\n      type: 'pie',\r\n      data: scoreDistributionData,\r\n      options: chartOptions,\r\n    });\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      Object.values(chartsRef.current).forEach(chart => {\r\n        if (chart) {\r\n          chart.destroy();\r\n        }\r\n      });\r\n    };\r\n  }, [history, assessments]);\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n      <div className=\"bg-white shadow rounded-lg p-6\">\r\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Score Trends</h3>\r\n        <div style={{ height: '300px', position: 'relative' }}>\r\n          <canvas ref={lineChartRef} />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white shadow rounded-lg p-6\">\r\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Section-wise Performance</h3>\r\n        <div style={{ height: '300px', position: 'relative' }}>\r\n          <canvas ref={barChartRef} />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white shadow rounded-lg p-6\">\r\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Score Distribution</h3>\r\n        <div style={{ height: '300px', position: 'relative' }}>\r\n          <canvas ref={pieChartRef} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nAssessmentVisualizations.propTypes = {\r\n  history: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      assessmentId: PropTypes.string.isRequired,\r\n      score: PropTypes.number.isRequired,\r\n      completedAt: PropTypes.string.isRequired,\r\n    })\r\n  ).isRequired,\r\n  assessments: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      title: PropTypes.string.isRequired,\r\n      type: PropTypes.string.isRequired,\r\n      questions: PropTypes.array.isRequired,\r\n    })\r\n  ).isRequired,\r\n};\r\n\r\nexport default AssessmentVisualizations; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}